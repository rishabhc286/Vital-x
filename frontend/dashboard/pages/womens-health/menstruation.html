<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menstruation | Vital-X</title>
    <link rel="stylesheet" href="../../dashboard.css">
    <link rel="stylesheet" href="menstruation.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Backend Services -->
    <script src="../../../backend/config/firebase-config.js"></script>
    <script src="../../../backend/services/auth-service.js"></script>
    <script src="../../../backend/services/user-service.js"></script>
    <script src="../../../backend/services/health-data-service.js"></script>
</head>

<body data-page="womens-health">

    <div class="dashboard">
        <!-- SIDEBAR -->
        <div id="sidebar-container"></div>
        <script src="../../load-sidebar.js"></script>

        <!-- MAIN CONTENT -->
        <main class="content">
            <button class="sidebar-toggle" onclick="toggleSidebar()">‚ò∞</button>

            <!-- HEADER -->
            <div class="page-header">
                <div>
                    <h1>üå∏ Menstruation Health</h1>
                    <p class="subtitle">Track your cycle, symptoms, and overall reproductive health</p>
                </div>
                <div class="header-actions">
                    <button class="btn-log-period" onclick="logPeriod()">üìù Log Period</button>
                    <button class="btn-settings" onclick="openSettings()">‚öôÔ∏è Settings</button>
                </div>
            </div>

            <!-- QUICK STATS -->
            <div class="quick-stats-grid">
                <div class="card stat-card">
                    <div class="stat-icon">üìÖ</div>
                    <div class="stat-info">
                        <span class="stat-label">Cycle Day</span>
                        <span class="stat-value" id="cycleDay">Day 5</span>
                    </div>
                </div>
                <div class="card stat-card">
                    <div class="stat-icon">‚è±Ô∏è</div>
                    <div class="stat-info">
                        <span class="stat-label">Cycle Length</span>
                        <span class="stat-value" id="cycleLength">28 days</span>
                    </div>
                </div>
                <div class="card stat-card">
                    <div class="stat-icon">ü©∏</div>
                    <div class="stat-info">
                        <span class="stat-label">Period Duration</span>
                        <span class="stat-value" id="periodDuration">5 days</span>
                    </div>
                </div>
                <div class="card stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-info">
                        <span class="stat-label">Next Period</span>
                        <span class="stat-value" id="nextPeriod">In 23 days</span>
                    </div>
                </div>
            </div>

            <!-- MAIN CONTENT GRID -->
            <div class="menstruation-grid">
                <!-- CALENDAR SECTION -->
                <div class="card calendar-card">
                    <div class="card-header">
                        <span class="card-icon">üìÖ</span>
                        <h3>Cycle Calendar</h3>
                        <div class="calendar-controls">
                            <button class="btn-nav" onclick="previousMonth()">‚Üê</button>
                            <span class="month-year" id="monthYear">January 2024</span>
                            <button class="btn-nav" onclick="nextMonth()">‚Üí</button>
                        </div>
                    </div>
                    <div class="calendar-container" id="calendarContainer">
                        <!-- Calendar will be generated by JS -->
                    </div>
                    <div class="calendar-legend">
                        <div class="legend-item">
                            <span class="legend-color period"></span>
                            <span>Period</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color fertile"></span>
                            <span>Fertile Window</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color ovulation"></span>
                            <span>Ovulation</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color predicted"></span>
                            <span>Predicted</span>
                        </div>
                    </div>
                </div>

                <!-- CYCLE INFO -->
                <div class="card cycle-info-card">
                    <div class="card-header">
                        <span class="card-icon">‚ÑπÔ∏è</span>
                        <h3>Cycle Information</h3>
                    </div>
                    <div class="cycle-details">
                        <div class="detail-item">
                            <span class="detail-label">Last Period Start</span>
                            <span class="detail-value" id="lastPeriodStart">Jan 15, 2024</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Last Period End</span>
                            <span class="detail-value" id="lastPeriodEnd">Jan 19, 2024</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Average Cycle</span>
                            <span class="detail-value" id="avgCycle">28 days</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Average Period</span>
                            <span class="detail-value" id="avgPeriod">5 days</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ovulation Day</span>
                            <span class="detail-value" id="ovulationDay">Day 14</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Fertile Window</span>
                            <span class="detail-value" id="fertileWindow">Days 12-16</span>
                        </div>
                    </div>
                    <button class="btn-edit-cycle" onclick="editCycleInfo()">‚úèÔ∏è Edit Cycle Info</button>
                </div>

                <!-- SYMPTOMS TRACKER -->
                <div class="card symptoms-card">
                    <div class="card-header">
                        <span class="card-icon">ü§í</span>
                        <h3>Today's Symptoms</h3>
                    </div>
                    <div class="symptoms-grid" id="symptomsGrid">
                        <div class="symptom-item" onclick="toggleSymptom('cramps')">
                            <span class="symptom-icon">üí¢</span>
                            <span class="symptom-name">Cramps</span>
                            <span class="symptom-level" id="cramps-level"></span>
                        </div>
                        <div class="symptom-item" onclick="toggleSymptom('bloating')">
                            <span class="symptom-icon">üéà</span>
                            <span class="symptom-name">Bloating</span>
                            <span class="symptom-level" id="bloating-level"></span>
                        </div>
                        <div class="symptom-item" onclick="toggleSymptom('headache')">
                            <span class="symptom-icon">ü§ï</span>
                            <span class="symptom-name">Headache</span>
                            <span class="symptom-level" id="headache-level"></span>
                        </div>
                        <div class="symptom-item" onclick="toggleSymptom('backache')">
                            <span class="symptom-icon">ü´†</span>
                            <span class="symptom-name">Backache</span>
                            <span class="symptom-level" id="backache-level"></span>
                        </div>
                        <div class="symptom-item" onclick="toggleSymptom('nausea')">
                            <span class="symptom-icon">ü§¢</span>
                            <span class="symptom-name">Nausea</span>
                            <span class="symptom-level" id="nausea-level"></span>
                        </div>
                        <div class="symptom-item" onclick="toggleSymptom('fatigue')">
                            <span class="symptom-icon">üò¥</span>
                            <span class="symptom-name">Fatigue</span>
                            <span class="symptom-level" id="fatigue-level"></span>
                        </div>
                        <div class="symptom-item" onclick="toggleSymptom('mood')">
                            <span class="symptom-icon">üòä</span>
                            <span class="symptom-name">Mood</span>
                            <span class="symptom-level" id="mood-level"></span>
                        </div>
                        <div class="symptom-item" onclick="toggleSymptom('acne')">
                            <span class="symptom-icon">üî¥</span>
                            <span class="symptom-name">Acne</span>
                            <span class="symptom-level" id="acne-level"></span>
                        </div>
                    </div>
                </div>

                <!-- FLOW TRACKER -->
                <div class="card flow-card">
                    <div class="card-header">
                        <span class="card-icon">ü©∏</span>
                        <h3>Flow Tracking</h3>
                    </div>
                    <div class="flow-options">
                        <button class="flow-btn" data-flow="light" onclick="setFlow('light')">
                            <span class="flow-icon">üíß</span>
                            <span>Light</span>
                        </button>
                        <button class="flow-btn" data-flow="medium" onclick="setFlow('medium')">
                            <span class="flow-icon">üíßüíß</span>
                            <span>Medium</span>
                        </button>
                        <button class="flow-btn" data-flow="heavy" onclick="setFlow('heavy')">
                            <span class="flow-icon">üíßüíßüíß</span>
                            <span>Heavy</span>
                        </button>
                        <button class="flow-btn" data-flow="spotting" onclick="setFlow('spotting')">
                            <span class="flow-icon">üî¥</span>
                            <span>Spotting</span>
                        </button>
                    </div>
                    <div class="current-flow" id="currentFlow">
                        <span>Today's flow: <strong>Not set</strong></span>
                    </div>
                </div>

                <!-- PREDICTIONS -->
                <div class="card predictions-card">
                    <div class="card-header">
                        <span class="card-icon">üîÆ</span>
                        <h3>Predictions</h3>
                    </div>
                    <div class="predictions-list">
                        <div class="prediction-item">
                            <div class="prediction-icon">ü©∏</div>
                            <div class="prediction-info">
                                <h4>Next Period</h4>
                                <p id="nextPeriodDate">Feb 12, 2024</p>
                            </div>
                        </div>
                        <div class="prediction-item">
                            <div class="prediction-icon">ü•ö</div>
                            <div class="prediction-info">
                                <h4>Ovulation</h4>
                                <p id="nextOvulation">Jan 29, 2024</p>
                            </div>
                        </div>
                        <div class="prediction-item">
                            <div class="prediction-icon">üíö</div>
                            <div class="prediction-info">
                                <h4>Fertile Window</h4>
                                <p id="nextFertile">Jan 27 - Jan 31</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- STATISTICS CHART -->
                <div class="card chart-card">
                    <div class="card-header">
                        <span class="card-icon">üìà</span>
                        <h3>Cycle Statistics</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="cycleChart"></canvas>
                    </div>
                </div>

                <!-- HEALTH INSIGHTS -->
                <div class="card insights-card">
                    <div class="card-header">
                        <span class="card-icon">üí°</span>
                        <h3>Health Insights</h3>
                    </div>
                    <div class="insights-list" id="insightsList">
                        <div class="insight-item">
                            <div class="insight-icon">‚úÖ</div>
                            <div class="insight-content">
                                <h4>Regular Cycle</h4>
                                <p>Your cycle has been regular for the past 3 months. Great!</p>
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-icon">üíß</div>
                            <div class="insight-content">
                                <h4>Hydration Reminder</h4>
                                <p>Stay hydrated during your period to reduce bloating.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../../load-sidebar.js"></script>
    <script src="menstruation.js"></script>
</body>

</html>